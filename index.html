<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
    <title>CricHD Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://player.twitch.tv/js/embed/v1.js"></script>
    <style>
        :root { --primary: #E50914; --text: #f0f0f0; }
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Montserrat', sans-serif; background: #000; color: var(--text);
            height: 100vh; /* Fallback */
            height: 100dvh; /* Mobile browser friendly height */
            overflow: hidden; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        /* Bg */
        .cinema-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: url('https://images.unsplash.com/photo-1531415074968-036ba1b575da?q=80&w=2067&auto=format&fit=crop') no-repeat center center/cover;
            filter: blur(20px) brightness(0.3); z-index: -1;
        }

        /* Player Box */
        .player-container {
            position: relative; width: 100%; max-width: 1100px; aspect-ratio: 16/9;
            background: #000; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            border-radius: 12px; border: 1px solid #333;
        }

        /* Mobile Landscape Specific Fix */
        @media (max-width: 900px) and (orientation: landscape) {
            .player-container { width: 100%; height: 100dvh; border-radius: 0; aspect-ratio: auto; }
        }

        #twitch-player { width: 100%; height: 100%; position: absolute; z-index: 1; }

        /* --- OFFLINE SCREEN --- */
        #offline-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15,15,15,0.98); 
            display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10;
            text-align: center; padding: 20px;
        }
        .off-logo img { width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--primary); margin-bottom: 15px; }
        .off-title { font-size: 2rem; font-weight: 800; margin-bottom: 5px; color: #fff; }
        .off-sub { font-size: 1rem; color: #aaa; margin-bottom: 20px; }
        
        .btn-tg {
            background: #0088cc; color: white; padding: 10px 20px; border-radius: 50px; 
            text-decoration: none; font-weight: bold; display: flex; align-items: center; gap: 8px;
        }

        /* --- CONTROLS OVERLAY (TELEGRAM FIX) --- */
        .controls-overlay {
            position: absolute; 
            bottom: 0; left: 0; width: 100%; 
            /* Fix for Telegram: Extra padding at bottom */
            padding: 10px 20px 40px 20px; 
            padding-bottom: calc(40px + env(safe-area-inset-bottom));
            
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            opacity: 0; transition: opacity 0.3s; z-index: 20; pointer-events: none;
        }
        .show-controls { opacity: 1; pointer-events: auto; }

        .controls-bar {
            display: flex; align-items: center; gap: 15px;
            background: rgba(30,30,30,0.8); backdrop-filter: blur(10px);
            padding: 8px 20px; border-radius: 40px; border: 1px solid rgba(255,255,255,0.1);
            width: fit-content; margin: 0 auto;
            /* Raise the bar slightly */
            transform: translateY(-10px);
        }

        .icon-btn { background: none; border: none; color: #fff; cursor: pointer; padding: 5px; display: flex; }
        .icon-btn:hover { color: var(--primary); transform: scale(1.1); }
        .icon-btn svg { width: 24px; height: 24px; fill: currentColor; }
        input[type=range] { width: 70px; height: 3px; accent-color: var(--primary); cursor: pointer; }

    </style>
</head>
<body>

    <div class="cinema-bg"></div>

    <div class="player-container" id="pContainer">
        
        <div id="offline-overlay">
            <div class="off-logo">
                <img src="https://lh3.googleusercontent.com/d/1XTp_aF5GuHgqbPEhUQVE8SJwBXs4YUQ8" alt="Logo">
            </div>
            <h1 class="off-title">OFFLINE</h1>
            <p class="off-sub" id="statusMsg">Stream will start soon...</p>
            <a href="https://t.me/cric_hd_live" target="_blank" class="btn-tg">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="white"><path d="M12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm5.5 8.5l-2 9.5c-.1.5-.4.6-.8.4l-4.5-3.3-2.2 2.1c-.2.2-.4.4-.9.4v-4.6l8.3-7.5c.4-.3-.1-.5-.6-.2L6.8 11.6 2.4 10.2c-1-.3-1-1 .2-1.5l14.9-5.7c.7-.3 1.3 0 1 1.5z"/></svg>
                Telegram
            </a>
        </div>

        <div id="twitch-player"></div>

        <div class="controls-overlay" id="controlsLayer">
            <div class="controls-bar">
                <button class="icon-btn" id="playBtn"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
                <button class="icon-btn" id="muteBtn"><svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg></button>
                <input type="range" id="volRange" min="0" max="1" step="0.1" value="0.5">
                <button class="icon-btn" id="fsBtn"><svg viewBox="0 0 24 24"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg></button>
            </div>
        </div>
    </div>

<script type="text/javascript">
  // CHANNEL NAME HERE
  var options = {
    width: "100%", height: "100%", channel: "bccitv", 
    parent: ["abpcrime.github.io"], autoplay: true, muted: false, controls: false 
  };
  
  var player = new Twitch.Player("twitch-player", options);
  
  const offlineOverlay = document.getElementById('offline-overlay');
  const controlsLayer = document.getElementById('controlsLayer');
  const pContainer = document.getElementById('pContainer');
  const playBtn = document.getElementById('playBtn');
  const muteBtn = document.getElementById('muteBtn');

  // Icons
  const iPlay = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>';
  const iPause = '<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';
  const iMute = '<svg viewBox="0 0 24 24"><path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73 4.27 3zM12 4L9.91 6.09 12 8.18V4z"/></svg>';
  const iUnmute = '<svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>';

  // Auto-Hide Logic
  let hideTimeout;
  function showControls() {
      controlsLayer.classList.add('show-controls');
      clearTimeout(hideTimeout);
      hideTimeout = setTimeout(() => {
          controlsLayer.classList.remove('show-controls');
      }, 3000);
  }
  pContainer.addEventListener('mousemove', showControls);
  pContainer.addEventListener('touchstart', showControls);
  pContainer.addEventListener('click', showControls);

  // Player Events
  player.addEventListener(Twitch.Player.READY, () => { player.setVolume(0.5); });
  player.addEventListener(Twitch.Player.ONLINE, () => { offlineOverlay.style.display = "none"; });
  player.addEventListener(Twitch.Player.OFFLINE, () => { offlineOverlay.style.display = "flex"; });

  playBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      if(player.isPaused()){ player.play(); playBtn.innerHTML = iPause; }
      else { player.pause(); playBtn.innerHTML = iPlay; }
  });

  muteBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      if(player.getMuted()){ player.setMuted(false); muteBtn.innerHTML = iUnmute; }
      else { player.setMuted(true); muteBtn.innerHTML = iMute; }
  });

  document.getElementById('fsBtn').addEventListener('click', (e) => {
      e.stopPropagation();
      !document.fullscreenElement ? pContainer.requestFullscreen() : document.exitFullscreen();
  });
  
  document.getElementById('volRange').addEventListener('input', (e) => {
       e.stopPropagation();
       player.setVolume(parseFloat(e.target.value));
  });
</script>
</body>
</html>
