<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>CricHD Player</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://player.twitch.tv/js/embed/v1.js"></script>
    <style>
        /* --- THEME VARS --- */
        :root {
            --primary: #2563eb; /* Hotstar Blue */
            --accent: #ffcc00;
            --bg: #0f1014;
            --surface: #1c1e26;
            --glass: rgba(28, 30, 38, 0.9);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body { 
            background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; 
            height: 100vh; display: flex; overflow: hidden;
        }

        /* --- SIDEBAR --- */
        .sidebar {
            width: 80px; height: 100vh; background: var(--surface); border-right: 1px solid #333;
            display: flex; flex-direction: column; align-items: center; padding-top: 20px; z-index: 50;
            transition: width 0.3s;
        }
        .sidebar:hover { width: 200px; } /* Expand on hover */
        
        .nav-item {
            width: 100%; padding: 15px 0; display: flex; align-items: center; cursor: pointer;
            color: #888; transition: 0.2s; padding-left: 28px;
        }
        .nav-item:hover, .nav-item.active { color: var(--accent); background: rgba(255,255,255,0.05); border-left: 3px solid var(--accent); }
        .nav-icon { width: 24px; height: 24px; fill: currentColor; flex-shrink: 0; }
        .nav-text { margin-left: 15px; font-weight: 600; white-space: nowrap; opacity: 0; transition: 0.2s; }
        .sidebar:hover .nav-text { opacity: 1; }

        /* --- MAIN CONTENT --- */
        .main-area { flex: 1; display: flex; flex-direction: column; align-items: center; overflow-y: auto; padding: 20px; position: relative; }

        /* PLAYER WRAPPER */
        .player-wrapper {
            width: 100%; max-width: 1100px; aspect-ratio: 16/9;
            background: #000; border-radius: 12px; overflow: hidden;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            position: relative;
        }

        #twitch-player { width: 100%; height: 100%; position: absolute; z-index: 1; }

        /* --- SKELETON LOADER (Server Switch Effect) --- */
        .skeleton-loader {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #111; z-index: 5; display: none;
        }
        .shimmer {
            width: 100%; height: 100%;
            background: linear-gradient(90deg, #111 0%, #222 50%, #111 100%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 0% { background-position: -200% 0; } 100% { background-position: 200% 0; } }

        /* --- SERVER SELECTOR --- */
        .server-bar {
            width: 100%; max-width: 1100px; margin-top: 15px;
            display: flex; gap: 10px; flex-wrap: wrap;
        }
        .server-btn {
            background: var(--surface); color: #ccc; border: 1px solid #444;
            padding: 10px 20px; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px;
            display: flex; align-items: center; gap: 8px; transition: 0.2s;
        }
        .server-btn:hover { background: #333; }
        .server-btn.active { background: var(--primary); color: white; border-color: var(--primary); box-shadow: 0 0 10px rgba(37, 99, 235, 0.4); }
        .indicator { width: 8px; height: 8px; background: #0f0; border-radius: 50%; display: none; }
        .server-btn.active .indicator { display: block; }

        /* --- MATCH INFO --- */
        .info-box {
            width: 100%; max-width: 1100px; margin-top: 20px;
            background: var(--surface); padding: 20px; border-radius: 10px;
        }
        .match-title { font-size: 1.5rem; font-weight: 800; color: #fff; margin-bottom: 5px; }
        .match-meta { color: #888; font-size: 0.9rem; display: flex; gap: 15px; }
        .live-badge { background: #cc0000; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold; font-size: 10px; }

        /* --- FLOATING HEARTS ANIMATION --- */
        .floating-heart {
            position: absolute; bottom: 80px; right: 20px; width: 30px;
            animation: floatUp 2s ease-out forwards; pointer-events: none; z-index: 20;
        }
        @keyframes floatUp { 
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-150px) scale(1.5); opacity: 0; }
        }

        /* Heart Button */
        .heart-trigger-btn {
            position: absolute; bottom: 80px; right: 20px;
            background: rgba(0,0,0,0.6); border: 1px solid #444; border-radius: 50%;
            width: 45px; height: 45px; cursor: pointer; z-index: 25;
            display: flex; justify-content: center; align-items: center; transition: 0.2s;
        }
        .heart-trigger-btn:hover { transform: scale(1.1); background: rgba(255,0,0,0.2); border-color: red; }
        .heart-trigger-btn svg { fill: #fff; width: 24px; transition: 0.2s; }
        .heart-trigger-btn:active svg { fill: red; transform: scale(0.8); }

        /* --- OVERLAYS (Offline/Watermark) --- */
        #offline-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, #222 0%, #000 100%);
            display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 4;
        }
        .watermark { position: absolute; top: 20px; right: 20px; width: 40px; opacity: 0.6; z-index: 10; pointer-events: none; }

        /* Controls Bar (Custom) */
        .controls-bar {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 50px;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
            display: flex; align-items: center; padding: 0 15px; z-index: 10; opacity: 0; transition: opacity 0.3s;
        }
        .player-wrapper:hover .controls-bar { opacity: 1; }
        .icon-btn { background: none; border: none; color: white; cursor: pointer; padding: 8px; }
        
        @media (max-width: 768px) {
            .sidebar { width: 0; overflow: hidden; } /* Hide sidebar on mobile */
            .main-area { padding: 0; }
            .player-wrapper { border-radius: 0; }
            .server-bar, .info-box { padding: 10px; width: 100%; }
        }
    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="nav-item active">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            <span class="nav-text">Home</span>
        </div>
        <div class="nav-item">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg>
            <span class="nav-text">Live</span>
        </div>
        <div class="nav-item">
            <svg class="nav-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/></svg>
            <span class="nav-text">Highlights</span>
        </div>
    </nav>

    <div class="main-area">
        
        <div class="player-wrapper" id="pWrapper">
            
            <div class="skeleton-loader" id="skelLoader"><div class="shimmer"></div></div>

            <img class="watermark" src="https://lh3.googleusercontent.com/d/1XTp_aF5GuHgqbPEhUQVE8SJwBXs4YUQ8" alt="Logo">

            <div id="offline-overlay">
                <h2 style="color:#ffcc00; font-weight:800; font-size:2rem;">STREAM OFFLINE</h2>
                <p style="color:#888;">Switch Server below or check back later.</p>
            </div>

            <div id="twitch-player"></div>

            <div class="controls-bar">
                <button class="icon-btn" id="playBtn">â–¶</button>
                <button class="icon-btn" id="muteBtn">ðŸ”Š</button>
                <div style="flex:1"></div>
                <button class="icon-btn" id="fsBtn">â›¶</button>
            </div>

            <button class="heart-trigger-btn" id="heartBtn" onclick="sendHeart()">
                <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
            </button>
        </div>

        <div class="server-bar">
            <div class="server-btn active" onclick="switchServer(1, this)">
                <div class="indicator"></div> Server 1 (HD)
            </div>
            <div class="server-btn" onclick="switchServer(2, this)">
                <div class="indicator"></div> Server 2 (Backup)
            </div>
            <div class="server-btn" onclick="switchServer(3, this)">
                <div class="indicator"></div> Server 3 (SD)
            </div>
        </div>

        <div class="info-box">
            <div class="match-title">India Tour of England 2026 - 1st Test</div>
            <div class="match-meta">
                <span class="live-badge">LIVE</span>
                <span>â€¢ English Commentary</span>
                <span>â€¢ 1.2M Viewers</span>
            </div>
            <div style="margin-top:15px; border-top:1px solid #333; padding-top:10px; display:flex; gap:10px;">
                <a href="https://t.me/cric_hd_live" target="_blank" style="color:#0088cc; text-decoration:none; font-size:14px; font-weight:bold;">Join Telegram</a>
                <span style="color:#444">|</span>
                <a href="https://www.facebook.com/profile.php?id=61585476940061" target="_blank" style="color:#1877F2; text-decoration:none; font-size:14px; font-weight:bold;">Facebook Page</a>
            </div>
        </div>

    </div>

<script type="text/javascript">
  var options = {
    width: "100%", height: "100%", channel: "bccitv", 
    parent: ["abpcrime.github.io"], autoplay: true, muted: true, controls: false 
  };
  var player = new Twitch.Player("twitch-player", options);
  
  const loader = document.getElementById('skelLoader');
  const offlineOverlay = document.getElementById('offline-overlay');
  const playBtn = document.getElementById('playBtn');
  const muteBtn = document.getElementById('muteBtn');
  const fsBtn = document.getElementById('fsBtn');
  const wrapper = document.getElementById('pWrapper');

  // --- FLOATING HEARTS LOGIC ---
  function sendHeart() {
      const heart = document.createElement('div');
      heart.innerHTML = '<svg viewBox="0 0 24 24" style="fill:#e50914;width:100%;height:100%"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>';
      heart.className = 'floating-heart';
      
      // Random position slightly left or right
      const randomX = (Math.random() - 0.5) * 40;
      heart.style.right = (20 + randomX) + 'px';
      
      wrapper.appendChild(heart);
      
      // Remove after animation
      setTimeout(() => { heart.remove(); }, 2000);
  }

  // --- SERVER SWITCH LOGIC ---
  function switchServer(id, btn) {
      // 1. Activate Button UI
      document.querySelectorAll('.server-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      // 2. Show Skeleton Loader
      loader.style.display = 'block';

      // 3. Simulate Server Change (Reload Stream)
      setTimeout(() => {
          const currentChannel = player.getChannel();
          player.setChannel(currentChannel); // Reloads same channel for demo
          loader.style.display = 'none';
      }, 1500); // 1.5 sec delay for effect
  }

  // Player Events
  player.addEventListener(Twitch.Player.ONLINE, () => { offlineOverlay.style.display = "none"; });
  player.addEventListener(Twitch.Player.OFFLINE, () => { offlineOverlay.style.display = "flex"; });

  // Basic Controls
  playBtn.addEventListener('click', () => { player.isPaused() ? player.play() : player.pause(); });
  muteBtn.addEventListener('click', () => { player.getMuted() ? player.setMuted(false) : player.setMuted(true); });
  fsBtn.addEventListener('click', () => { document.fullscreenElement ? document.exitFullscreen() : wrapper.requestFullscreen(); });

</script>
</body>
</html>
